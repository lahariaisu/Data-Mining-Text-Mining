*------------------------------------------------------------*
* Report Log
Date:                November 18, 2023
Time:                18:53:49
*------------------------------------------------------------*
17032  %let EMEXCEPTIONSTRING=;
17033  *------------------------------------------------------------*;
17034  * REPORT: FIMPORT2;
17035  *------------------------------------------------------------*;
17036  %let EM_ACTION = REPORT;
17037  %let syscc = 0;
17038  /* Fimport.source */
17039  %macro main;
17040        %if %upcase(&EM_ACTION) = CREATE %then %do;
17041           filename temp catalog 'sashelp.emsamp.Fimport_create.source';
17042           %include temp;
17043           filename temp;
17044           %create;
17045        %end;
17046        %else
17047        %if %upcase(&EM_ACTION) = TRAIN %then %do;
17048           filename temp catalog 'sashelp.emsamp.Fimport_train.source';
17049           %include temp;
17050           filename temp;
17051           %train;
17052        %end;
17053        %else
17054        %if %upcase(&EM_ACTION) = UPDATE %then %do;
17055           filename temp catalog 'sashelp.emsamp.Fimport_update.source';
17056           %include temp;
17057           filename temp;
17058           %update;
17059        %end;
17060        %else
17061        %if %upcase(&EM_ACTION) = PROPERTY %then %do;
17062           filename temp catalog 'sashelp.emsamp.Fimport_actions.source';
17063           %include temp;
17064           filename temp;
17065           %property;
17066        %end;
17067         %else
17068        %if %upcase(&EM_ACTION) = SCORE %then %do;
17069           filename temp catalog 'sashelp.emsamp.Fimport_score.source';
17070           %include temp;
17071           filename temp;
17072           %score;
17073        %end;
17074        %else
17075        %if %upcase(&EM_ACTION) = REPORT %then %do;
17076           filename temp catalog 'sashelp.emsamp.Fimport_report.source';
17077           %include temp;
17078           filename temp;
17079           %report;
17080        %end;
17081        %else
17082        %if %upcase(&EM_ACTION) = OPENVARIABLESET %then %do;
17083           filename temp catalog 'sashelp.emsamp.Fimport_actions.source';
17084           %include temp;
17085           filename temp;
17086           %openvariableset;
17087        %end;
17088        %else
17089        %if %upcase(&EM_ACTION) = CLOSEVARIABLESET %then %do;
17090           filename temp catalog 'sashelp.emsamp.Fimport_actions.source';
17091           %include temp;
17092           filename temp;
17093           %closevariableset;
17094        %end;
17095  %mend main;
17096  %main;
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMSAMP.FIMPORT_REPORT.SOURCE.
17097 +%macro report;
17098 +    %em_getname(key=EMSTAT,     type=DATA);
17099 +    %em_getname(key=EMINFO,     type=DATA);
17100 +    %em_getname(key=CLASS,      type=DATA);
17101 +    %em_getname(key=INTERVAL,   type=DATA);
17102 +
17103 +    %em_REPORT(key=EMSTAT,   viewtype=DATA, description=EMSTAT, block=Report, autodisplay=Y);
17104 +    %em_REPORT(key=INTERVAL, viewtype=LATTICE, LATTICETYPE=HISTOGRAM, LATTICEX=VARIABLE, DISCRETEX=Y, X=VALUE,FREQ=PERCENT,block=Report, description=INTERVALTARGET, autodisplay=N);
17105 +    %em_REPORT(key=CLASS, viewtype=LATTICE, LATTICEtype=BAR, LATTICEX=VARIABLE, X=VALUE,FREQ=PERCENT, block=Report, description=CLASSTARGET, autodisplay=Y);
17106 +
17107 +    %if &em_property_summarize eq Y %then %do;
17108 +        filename temp catalog 'sashelp.emmeta.emadvisestatistics.source';
17109 +        %include temp;
17110 +        filename temp;
17111 +
17112 +        data work.tempmeta;
17113 +           set &em_lib..&em_nodeid._CMETA_TRAIN;
17114 +           if ROLE='TARGET' and LEVEL ne 'INTERVAL' then output;
17115 +         run;
17116 +
17117 +        %class_profile(DATA=&em_export_train, OUTPUT=&em_user_class, VARS=,
17118 +                      METADATA=tempmeta, STAT=_STAT, FREQ=);
17119 +
17120 +         data work.tempmeta;
17121 +           set &em_lib..&em_nodeid._CMETA_TRAIN;
17122 +            if ROLE='TARGET' and LEVEL eq 'INTERVAL' then output;
17123 +         run;
17124 +         %var_profile(DATA=&em_export_train, OUTPUT=&em_user_INTERVAL, VARS=, METADATA=tempmeta, COMPUTESTAT=Y, STAT=_STAT, FREQ=,
17125 +                   BINDATA=, BIN=Y, NUMBARS=8, MINMAX=N);
17126 +
17127 +        data work.tempmeta;
17128 +           set &em_lib..&em_nodeid._CMETA_TRAIN;
17129 +        run;
17130 +
17131 +        %if "&em_property_advancedadvisor" eq "N" %then %do;
17132 +            %EmAdviseStat(&em_export_train, maxClassLevels=32, metadata=tempmeta, statisticData=&em_user_emstat);
17133 +
17134 +            data &em_data_exportset;
17135 +                 set &em_data_exportset;
17136 +                 if NODEPORT='TRAIN' then do;
17137 +                    EMINFO="&em_data_eminfo";
17138 +                    EMINFOMODTIME=datetime();
17139 +                 end;
17140 +            run;
17141 +        %end;
17142 +        %else %do;
17143 +            %em_getname(key=EMSTATDEFAULT,     type=DATA);
17144 +            %if %sysfunc(exist(&em_user_emstatdefault)) %then %do;
17145 +                data &em_user_emstat /  view=&em_user_emstat;
17146 +                   set &em_user_emstatdefault;
17147 +                run;
17148 +            %end;
17149 +        %end;
17150 +    %end;
17151 +    %else %do;
17152 +        %if "&em_property_advancedadvisor" eq "N" %then %do;
17153 +            proc datasets lib=&em_lib nolist;
17154 +               delete &em_nodeid._EMINFO;
17155 +            run;
17156 +            quit;
17157 +            data &em_data_exportset;
17158 +                 set &em_data_exportset;
17159 +                 if NODEPORT='TRAIN' then do;
17160 +                    EMINFO="";
17161 +                    EMINFOMODTIME=.;
17162 +                 end;
17163 +            run;
17164 +        %end;
17165 +    %end;
17166 +
17167 +    data &em_data_exportset;
17168 +       set &em_data_exportset;
17169 +       if NODEPORT='TRAIN' then do;
17170 +          ROLE="&em_property_role";
17171 +       end;
17172 +    run;
17173 +
17174 +    %if %sysfunc(exist(&em_data_variableSet)) %then %do;
17175 +        proc freq data=&em_data_variableset noprint;
17176 +             table ROLE*LEVEL/out=work.tempMeta;
17177 +        run;
17178 +        proc print data=work.tempmeta label noobs;
17179 +           var ROLE LEVEL COUNT;
17180 +           label ROLE  = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))"
17181 +                 LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))"
17182 +                 COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
17183 +        title9  ' ';
17184 +        title10  "%sysfunc(sasmsg(sashelp.dmine, rpt_exptattributes_title, NOQUOTE, TRAIN))";
17185 +        run;
17186 +        title10;
17187 +    %end;
17188 +
17189 +    %if %sysfunc(exist(work.tempmeta)) %then %do;
17190 +        proc datasets lib=work nolist;
17191 +           delete tempmeta;
17192 +        run;
17193 +        quit;
17194 +    %end;
17195 +
17196 +%mend report;
17197 +
17198 +
17199 +
17200 +
17201 +
17202 +
17203 +
17204 +
17205 +
17206 +
17207 +
17208 +
17209 +
17210 +
17211 +
17212 +
17213 +
17214 +
17215 +
17216 +
17217 +
17218 +
17219 +
17220 +
17221 +
17222 +
17223 +
17224 +
17225 +
17226 +
17227 +
17228 +
17229 +
17230 +
17231 +
17232 +
17233 +
17234 +
17235 +
17236 +
17237 +
17238 +
17239 +
17240 +
17241 +
17242 +
17243 +
17244 +
NOTE: %INCLUDE (level 1) ending.
NOTE: Fileref TEMP has been deassigned.

NOTE: The data set WORK.EM_USER_REPORT has 132 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      


NOTE: There were 132 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 264 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      


NOTE: There were 264 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 396 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
      


NOTE: The file EMWS3.FIMPORT2_EMINFO (memtype=DATA) was not found, but appears on a DELETE statement.

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      


NOTE: There were 6 observations read from the data set EMWS3.FIMPORT2_EXPORTSET.
NOTE: The data set EMWS3.FIMPORT2_EXPORTSET has 6 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 6 observations read from the data set EMWS3.FIMPORT2_EXPORTSET.
NOTE: The data set EMWS3.FIMPORT2_EXPORTSET has 6 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      


NOTE: There were 2 observations read from the data set EMWS3.FIMPORT2_VARIABLESET.
NOTE: The data set WORK.TEMPMETA has 2 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.06 seconds
      cpu time            0.01 seconds
      


NOTE: There were 2 observations read from the data set WORK.TEMPMETA.
NOTE: The PROCEDURE PRINT printed page 3.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      


NOTE: Deleting WORK.TEMPMETA (memtype=DATA).

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

17245  *------------------------------------------------------------*;
17246  * End REPORT: FIMPORT2;
17247  *------------------------------------------------------------*;

17248  /* Reset EM Options */
17249  options formchar="|----|+|---+=|-/\<>*";
17250  options nocenter ls=256 ps=10000;
17251  goptions reset=all device=GIF NODISPLAY;

17252  proc sort data=WORK.EM_USER_REPORT;
17253  by ID VIEW;
17254  run;

NOTE: There were 396 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 396 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

